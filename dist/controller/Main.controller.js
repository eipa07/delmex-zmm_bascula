sap.ui.define(["delmex/zmmbascula/controller/BaseController","delmex/zmmbascula/util/formatter","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox","sap/ui/core/BusyIndicator"],(e,t,o,s,l,i,r)=>{"use strict";return e.extend("delmex.zmmbascula.controller.Main",{formatter:t,onInit(){let e=this.getRequestModel();this.getView().setModel(e,"requestModel");let t=this.getCatalogsModel();this.getView().setModel(t,"catalogsModel");sap.ui.getCore().setModel(t,"catalogsModel")},navToDetail(e){var t=e.getSource();var o=t.getBindingContext("detailsModel");var s=o.getProperty(o.getPath());var l=s.Folio;console.log("Master busy");r.show(5e3);this.getRouter().navTo("RouteDetail",{folio:l},false)},onSearch(){r.show(5e3);var e=this.getFilters();var t=this;var s=this.getView().getModel("zbasc");const l="/Folio";var i=new o;s.read(l,{filters:e,success:function(e,o){i.setData(e.results);t.getView().setModel(i,"detailsModel");r.hide()},error:function(e){sap.m.MessageBox.error(e);r.hide()}})},getFilters(){let e=[];let t=this.getView().getModel("requestModel").getProperty("/Folio");let o=this.getView().getModel("requestModel").getProperty("/CentroEnt");let i=this.getView().getModel("requestModel").getProperty("/Tipoticket");let r=this.getView().getModel("requestModel").getProperty("/CentroSal");let a=this.getView().getModel("requestModel").getProperty("/Material");let n=this.getView().getModel("requestModel").getProperty("/NumeroDoc");let g=this.getView().getModel("requestModel").getProperty("/Placa");let d=this.getView().getModel("requestModel").getProperty("/FechaEntBas");let u=this.getView().getModel("requestModel").getProperty("/FechaSalBas");if(t){e.push(new s("Folio",l.EQ,t))}if(o){e.push(new s("CentroEnt",l.EQ,o))}if(i){e.push(new s("Tipoticket",l.EQ,i))}if(r){e.push(new s("CentroSal",l.EQ,r))}if(a){e.push(new s("Material",l.Contains,a))}if(n){e.push(new s("NumeroDoc",l.EQ,n))}if(g){e.push(new s("Placa",l.Contains,g))}if(d){let t=this.buildDate(d);e.push(new s("FechaEntBas",l.Contains,t))}if(u){let t=this.buildDate(u);e.push(new s("FechaSalBas",l.Contains,t))}return e}})});
//# sourceMappingURL=Main.controller.js.map